<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" type="image/png" href="favcoin.png" />
    <title>PRIME DEALS</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(45deg, #ff9a9e, #fad0c4, #fad0c4);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        h1 {
            text-align: center;
            font-size: 3rem;
            color: #333;
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.5);
            font-weight: bold;
        }

        label {
            font-size: 1.2rem;
            color: #444;
        }

        input, select {
            display: block;
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            border: 1px solid #ccc;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.1);
        }

        button {
            width: 100%;
            padding: 10px;
            border-radius: 5px;
            background-color: #ff6f61;
            border: none;
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);
        }

        button:hover {
            background-color: #ff4040;
            transform: scale(1.05);
        }

        .input-file {
            border: 1px dashed #ccc;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            transition: border-color 0.3s ease;
        }

        .input-file:hover {
            border-color: #888;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>PRIME DEALS</h1>
        <form id="ottForm">
            <label for="name">Name</label>
            <input type="text" id="name" name="name" required>

            <label for="email">Email</label>
            <input type="email" id="email" name="email" required>

            <label for="plan">Choose Your Plan</label>
            <select id="plan" name="plan" required>
                <option value="Basic Plan">Basic Plan - $5</option>
                <option value="Standard Plan">Standard Plan - $10</option>
                <option value="Premium Plan">Premium Plan - $15</option>
            </select>

            <label for="amount">Amount to Pay</label>
            <input type="text" id="amount" name="amount" required readonly>

            <label for="paymentProof">Upload Payment Screenshot</label>
            <input type="file" id="paymentProof" name="paymentProof" class="input-file" accept="image/*" required>
            <h3>Scan to Pay</h3>
            <div class="qrcode">
                <img src="phonepay.jpg" alt="Payment QR Code" width="200">
            </div>

            <button type="submit">Submit</button>
        </form>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script type="text/javascript">
        (function() {
            emailjs.init("lVEdOKIhaN5C_hktq");
        })();

        document.getElementById('ottForm').addEventListener('submit', function(event) {
            event.preventDefault(); // Prevent form submission

            let name = document.getElementById('name').value;
            let email = document.getElementById('email').value;
            let plan = document.getElementById('plan').value;
            let amount = document.getElementById('amount');
            let paymentProof = document.getElementById('paymentProof').files[0];

            // Set amount based on plan selected
            if (plan === "Basic Plan") {
                amount.value = "$5";
            } else if (plan === "Standard Plan") {
                amount.value = "$10";
            } else {
                amount.value = "$15";
            }

            if (!paymentProof) {
                alert("Please upload a payment screenshot!");
                return;
            }

            // Convert the image to base64
            getBase64(paymentProof, function(base64PaymentProof) {
                // Send the email using EmailJS
                emailjs.send("service_4z53bkp", "template_sup9h9n", {
                    name: name,
                    email: email,
                    plan: plan,
                    amount: amount.value,
                    paymentProof: base64PaymentProof
                })
                .then(function(response) {
                    alert("Email sent successfully!");
                }, function(error) {
                    alert("Failed to send email: " + error.text);
                });
            });
        });

        function getBase64(file, callback) {
            const reader = new FileReader();
            reader.onload = function() {
                callback(reader.result.split(",")[1]); // Strip off the base64 header (data:image/*)
            };
            reader.onerror = function(error) {
                console.log("Error: ", error);
            };
            reader.readAsDataURL(file);
        }
    </script>
</body>
</html>
